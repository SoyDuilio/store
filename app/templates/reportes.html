<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            padding-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: white;
            padding: 16px 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .back-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: #64748b;
            cursor: pointer;
        }
        
        .header-title {
            font-size: 18px;
            font-weight: 600;
            color: #0f172a;
        }
        
        .export-btn {
            background: #3b82f6;
            border: none;
            color: white;
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Filters */
        .filters {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 8px;
        }
        
        .filter-chip {
            padding: 8px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            background: white;
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }
        
        .filter-chip.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        /* Content */
        .content {
            padding: 16px 20px;
        }
        
        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .kpi-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .kpi-label {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 6px;
        }
        
        .kpi-value {
            font-size: 24px;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 4px;
        }
        
        .kpi-trend {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .trend-up {
            color: #10b981;
        }
        
        .trend-down {
            color: #ef4444;
        }
        
        /* Section */
        .section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #0f172a;
        }
        
        .section-action {
            font-size: 13px;
            color: #3b82f6;
            font-weight: 500;
            cursor: pointer;
        }
        
        /* Mora Table */
        .mora-table {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .mora-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .mora-row.level-1 { border-left-color: #f59e0b; }
        .mora-row.level-2 { border-left-color: #ef4444; }
        .mora-row.level-3 { border-left-color: #991b1b; }
        
        .mora-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }
        
        .mora-info {
            flex: 1;
        }
        
        .mora-name {
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 2px;
        }
        
        .mora-details {
            font-size: 12px;
            color: #64748b;
        }
        
        .mora-amount {
            text-align: right;
        }
        
        .mora-debt {
            font-size: 16px;
            font-weight: 700;
            color: #ef4444;
        }
        
        .mora-days {
            font-size: 11px;
            color: #64748b;
            margin-top: 2px;
        }
        
        /* Projection Chart */
        .projection-chart {
            margin-top: 16px;
        }
        
        .chart-bars {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .chart-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chart-date {
            font-size: 12px;
            color: #64748b;
            min-width: 70px;
            font-weight: 500;
        }
        
        .chart-bar-container {
            flex: 1;
            height: 32px;
            background: #f1f5f9;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }
        
        .chart-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            position: relative;
        }
        
        .chart-bar.collected {
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
        }
        
        .chart-bar-value {
            font-size: 12px;
            font-weight: 600;
            color: white;
        }
        
        .chart-amount {
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            min-width: 90px;
            text-align: right;
        }
        
        /* Performance Table */
        .performance-table {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .performance-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 10px;
        }
        
        .perf-rank {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 700;
            flex-shrink: 0;
        }
        
        .perf-rank.gold {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
        }
        
        .perf-rank.silver {
            background: linear-gradient(135deg, #d1d5db 0%, #9ca3af 100%);
            color: white;
        }
        
        .perf-rank.bronze {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
        }
        
        .perf-rank.normal {
            background: #e2e8f0;
            color: #64748b;
        }
        
        .perf-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .perf-info {
            flex: 1;
        }
        
        .perf-name {
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 4px;
        }
        
        .perf-progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .perf-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
            border-radius: 3px;
        }
        
        .perf-stats {
            text-align: right;
        }
        
        .perf-percentage {
            font-size: 16px;
            font-weight: 700;
            color: #0f172a;
        }
        
        .perf-amount {
            font-size: 12px;
            color: #64748b;
            margin-top: 2px;
        }
        
        /* Cash Flow Timeline */
        .cash-flow {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 16px;
        }
        
        .flow-item {
            display: flex;
            align-items: start;
            gap: 12px;
        }
        
        .flow-time {
            font-size: 12px;
            color: #64748b;
            min-width: 60px;
            padding-top: 4px;
        }
        
        .flow-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-top: 6px;
            flex-shrink: 0;
        }
        
        .flow-indicator.in {
            background: #10b981;
        }
        
        .flow-indicator.out {
            background: #ef4444;
        }
        
        .flow-content {
            flex: 1;
            padding-bottom: 16px;
            border-left: 2px solid #e2e8f0;
            padding-left: 16px;
            margin-left: -8px;
        }
        
        .flow-item:last-child .flow-content {
            border-left: none;
        }
        
        .flow-title {
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 4px;
        }
        
        .flow-description {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 6px;
        }
        
        .flow-amount {
            font-size: 16px;
            font-weight: 700;
        }
        
        .flow-amount.in {
            color: #10b981;
        }
        
        .flow-amount.out {
            color: #ef4444;
        }
        
        /* Summary Box */
        .summary-box {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
        }
        
        .summary-title {
            font-size: 14px;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 12px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 14px;
        }
        
        .summary-label {
            color: #475569;
        }
        
        .summary-value {
            font-weight: 600;
            color: #0f172a;
        }
        
        .summary-row.total {
            border-top: 2px solid #93c5fd;
            margin-top: 8px;
            padding-top: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-top">
            <button class="back-btn" onclick="goBack()">←</button>
            <div class="header-title">Reportes</div>
            <button class="export-btn" onclick="exportReport()">📤 Exportar</button>
        </div>
        
        <div class="filters">
            <div class="filter-chip active" onclick="setFilter('today')">Hoy</div>
            <div class="filter-chip" onclick="setFilter('week')">Esta Semana</div>
            <div class="filter-chip" onclick="setFilter('month')">Este Mes</div>
            <div class="filter-chip" onclick="setFilter('quarter')">Trimestre</div>
            <div class="filter-chip" onclick="setFilter('custom')">Personalizado</div>
        </div>
    </div>
    
    <!-- Content -->
    <div class="content">
        <!-- KPI Cards -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-label">Cartera Total</div>
                <div class="kpi-value">S/ 87,450</div>
                <div class="kpi-trend trend-up">
                    ↑ 12.5% vs semana anterior
                </div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Cobranza Hoy</div>
                <div class="kpi-value">S/ 3,744</div>
                <div class="kpi-trend trend-up">
                    ↑ 8.2% vs ayer
                </div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Mora Activa</div>
                <div class="kpi-value">S/ 12,340</div>
                <div class="kpi-trend trend-down">
                    ↓ 3.1% vs semana anterior
                </div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Tasa de Mora</div>
                <div class="kpi-value">14.1%</div>
                <div class="kpi-trend trend-down">
                    ↓ 2.3% vs mes anterior
                </div>
            </div>
        </div>
        
        <!-- Cartera Vencida -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">🚨 Cartera Vencida</div>
                <div class="section-action" onclick="viewAllMora()">Ver todos (23)</div>
            </div>
            
            <div class="mora-table">
                <div class="mora-row level-3">
                    <img src="https://i.pravatar.cc/150?img=47" alt="" class="mora-avatar">
                    <div class="mora-info">
                        <div class="mora-name">María Gonzáles Ríos</div>
                        <div class="mora-details">ID: 2847 • Vendedor: Carlos Mendoza</div>
                    </div>
                    <div class="mora-amount">
                        <div class="mora-debt">S/ 1,005</div>
                        <div class="mora-days">45 días</div>
                    </div>
                </div>
                
                <div class="mora-row level-2">
                    <img src="https://i.pravatar.cc/150?img=12" alt="" class="mora-avatar">
                    <div class="mora-info">
                        <div class="mora-name">Pedro Chávez Soto</div>
                        <div class="mora-details">ID: 1523 • Vendedor: Ana Torres</div>
                    </div>
                    <div class="mora-amount">
                        <div class="mora-debt">S/ 765</div>
                        <div class="mora-days">28 días</div>
                    </div>
                </div>
                
                <div class="mora-row level-2">
                    <img src="https://i.pravatar.cc/150?img=44" alt="" class="mora-avatar">
                    <div class="mora-info">
                        <div class="mora-name">Rosa Paredes Quispe</div>
                        <div class="mora-details">ID: 2134 • Vendedor: Jorge López</div>
                    </div>
                    <div class="mora-amount">
                        <div class="mora-debt">S/ 890</div>
                        <div class="mora-days">21 días</div>
                    </div>
                </div>
                
                <div class="mora-row level-1">
                    <img src="https://i.pravatar.cc/150?img=33" alt="" class="mora-avatar">
                    <div class="mora-info">
                        <div class="mora-name">Carlos Rojas Díaz</div>
                        <div class="mora-details">ID: 3456 • Vendedor: Carlos Mendoza</div>
                    </div>
                    <div class="mora-amount">
                        <div class="mora-debt">S/ 540</div>
                        <div class="mora-days">14 días</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Proyección de Cobranza -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">📈 Proyección Semanal</div>
                <div class="section-action" onclick="changePeriod()">Cambiar período</div>
            </div>
            
            <div class="projection-chart">
                <div class="chart-bars">
                    <div class="chart-row">
                        <div class="chart-date">Lun 13 Oct</div>
                        <div class="chart-bar-container">
                            <div class="chart-bar collected" style="width: 85%;">
                                <span class="chart-bar-value">85%</span>
                            </div>
                        </div>
                        <div class="chart-amount">S/ 3,744</div>
                    </div>
                    
                    <div class="chart-row">
                        <div class="chart-date">Mar 14 Oct</div>
                        <div class="chart-bar-container">
                            <div class="chart-bar" style="width: 90%;">
                                <span class="chart-bar-value">90%</span>
                            </div>
                        </div>
                        <div class="chart-amount">S/ 4,230</div>
                    </div>
                    
                    <div class="chart-row">
                        <div class="chart-date">Mié 15 Oct</div>
                        <div class="chart-bar-container">
                            <div class="chart-bar" style="width: 75%;">
                                <span class="chart-bar-value">75%</span>
                            </div>
                        </div>
                        <div class="chart-amount">S/ 3,890</div>
                    </div>
                    
                    <div class="chart-row">
                        <div class="chart-date">Jue 16 Oct</div>
                        <div class="chart-bar-container">
                            <div class="chart-bar" style="width: 80%;">
                                <span class="chart-bar-value">80%</span>
                            </div>
                        </div>
                        <div class="chart-amount">S/ 4,120</div>
                    </div>
                    
                    <div class="chart-row">
                        <div class="chart-date">Vie 17 Oct</div>
                        <div class="chart-bar-container">
                            <div class="chart-bar" style="width: 70%;">
                                <span class="chart-bar-value">70%</span>
                            </div>
                        </div>
                        <div class="chart-amount">S/ 3,670</div>
                    </div>
                </div>
                
                <div class="summary-box">
                    <div class="summary-title">Resumen Semanal</div>
                    <div class="summary-row">
                        <span class="summary-label">Total Proyectado</span>
                        <span class="summary-value">S/ 19,654</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Ya Cobrado</span>
                        <span class="summary-value">S/ 3,744</span>
                    </div>
                    <div class="summary-row total">
                        <span class="summary-label">Por Cobrar</span>
                        <span class="summary-value">S/ 15,910</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Rendimiento por Vendedor -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">🏆 Ranking de Vendedores</div>
                <div class="section-action" onclick="changeMetric()">Por monto</div>
            </div>
            
            <div class="performance-table">
                <div class="performance-row">
                    <div class="perf-rank gold">1</div>
                    <img src="https://i.pravatar.cc/150?img=12" alt="" class="perf-avatar">
                    <div class="perf-info">
                        <div class="perf-name">Jorge López</div>
                        <div class="perf-progress-bar">
                            <div class="perf-progress-fill" style="width: 112%;"></div>
                        </div>
                    </div>
                    <div class="perf-stats">
                        <div class="perf-percentage">112%</div>
                        <div class="perf-amount">S/ 5,600</div>
                    </div>
                </div>
                
                <div class="performance-row">
                    <div class="perf-rank silver">2</div>
                    <img src="https://i.pravatar.cc/150?img=33" alt="" class="perf-avatar">
                    <div class="perf-info">
                        <div class="perf-name">Carlos Mendoza</div>
                        <div class="perf-progress-bar">
                            <div class="perf-progress-fill" style="width: 95%;"></div>
                        </div>
                    </div>
                    <div class="perf-stats">
                        <div class="perf-percentage">95%</div>
                        <div class="perf-amount">S/ 4,750</div>
                    </div>
                </div>
                
                <div class="performance-row">
                    <div class="perf-rank bronze">3</div>
                    <img src="https://i.pravatar.cc/150?img=45" alt="" class="perf-avatar">
                    <div class="perf-info">
                        <div class="perf-name">Ana Torres</div>
                        <div class="perf-progress-bar">
                            <div class="perf-progress-fill" style="width: 88%;"></div>
                        </div>
                    </div>
                    <div class="perf-stats">
                        <div class="perf-percentage">88%</div>
                        <div class="perf-amount">S/ 4,400</div>
                    </div>
                </div>
                
                <div class="performance-row">
                    <div class="perf-rank normal">4</div>
                    <img src="https://i.pravatar.cc/150?img=27" alt="" class="perf-avatar">
                    <div class="perf-info">
                        <div class="perf-name">María Salazar</div>
                        <div class="perf-progress-bar">
                            <div class="perf-progress-fill" style="width: 72%;"></div>
                        </div>
                    </div>
                    <div class="perf-stats">
                        <div class="perf-percentage">72%</div>
                        <div class="perf-amount">S/ 3,600</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Flujo de Caja -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">💰 Flujo de Caja Hoy</div>
                <div class="section-action" onclick="viewFullCashFlow()">Ver detalle</div>
            </div>
            
            <div class="cash-flow">
                <div class="flow-item">
                    <div class="flow-time">08:00</div>
                    <div class="flow-indicator in"></div>
                    <div class="flow-content">
                        <div class="flow-title">Apertura de Cajas</div>
                        <div class="flow-description">4 vendedores iniciaron operaciones</div>
                        <div class="flow-amount in">+S/ 8,000</div>
                    </div>
                </div>
                
                <div class="flow-item">
                    <div class="flow-time">09:00-12:00</div>
                    <div class="flow-indicator in"></div>
                    <div class="flow-content">
                        <div class="flow-title">Cobranza Matutina</div>
                        <div class="flow-description">47 pagos recibidos</div>
                        <div class="flow-amount in">+S/ 5,640</div>
                    </div>
                </div>
                
                <div class="flow-item">
                    <div class="flow-time">10:30</div>
                    <div class="flow-indicator out"></div>
                    <div class="flow-content">
                        <div class="flow-title">Desembolsos de Créditos</div>
                        <div class="flow-description">8 nuevos créditos otorgados</div>
                        <div class="flow-amount out">-S/ 18,500</div>
                    </div>
                </div>
                
                <div class="flow-item">
                    <div class="flow-time">12:00-16:00</div>
                    <div class="flow-indicator in"></div>
                    <div class="flow-content">
                        <div class="flow-title">Cobranza Vespertina</div>
                        <div class="flow-description">35 pagos recibidos</div>
                        <div class="flow-amount in">+S/ 4,230</div>
                    </div>
                </div>
                
                <div class="flow-item">
                    <div class="flow-time">14:00</div>
                    <div class="flow-indicator out"></div>
                    <div class="flow-content">
                        <div class="flow-title">Gastos Operativos</div>
                        <div class="flow-description">Gasolina, mantenimiento, otros</div>
                        <div class="flow-amount out">-S/ 450</div>
                    </div>
                </div>
            </div>
            
            <div class="summary-box">
                <div class="summary-title">Balance del Día</div>
                <div class="summary-row">
                    <span class="summary-label">Ingresos Totales</span>
                    <span class="summary-value">S/ 17,870</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Egresos Totales</span>
                    <span class="summary-value">S/ 18,950</span>
                </div>
                <div class="summary-row total">
                    <span class="summary-label">Balance Neto</span>
                    <span class="summary-value">-S/ 1,080</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentFilter = 'today';
        
        function setFilter(filter) {
            currentFilter = filter;
            
            // Update UI
            document.querySelectorAll('.filter-chip').forEach(chip => chip.classList.remove('active'));
            event.target.classList.add('active');
            
            // Reload data with new filter
            console.log('Filter changed to:', filter);
            // Here would call API to reload data
        }
        
        function exportReport() {
            console.log('Exporting report for period:', currentFilter);
            alert('📊 Generando reporte...\n\nFormato: PDF\nPeríodo: ' + currentFilter);
        }
        
        function viewAllMora() {
            console.log('View all mora clients');
        }
        
        function changePeriod() {
            console.log('Change projection period');
        }
        
        function changeMetric() {
            console.log('Change performance metric');
        }
        
        function viewFullCashFlow() {
            console.log('View full cash flow');
        }
        
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>